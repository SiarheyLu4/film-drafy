function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function n(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var i={},a={},o=t.parcelRequired7c6;null==o&&((o=function(e){if(e in i)return i[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return i[e]=n,t.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequired7c6=o),o.register("6SyuW",(function(t,n){var i=o("9OeKo");const a=document.querySelector(".back_to_top");window.addEventListener("scroll",e(i)((function(){const e=window.pageYOffset;console.log(500),e>500&&a.classList.add("back_to_top-show"),e<500&&a.classList.remove("back_to_top-show")}),500)),a.addEventListener("click",(function e(){window.pageYOffset>0&&(window.scrollBy(0,-80),setTimeout(e,0))}))})),o.register("9OeKo",(function(e,n){var i="Expected a function",a=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,r=/^0o[0-7]+$/i,d=parseInt,c="object"==typeof t&&t&&t.Object===Object&&t,l="object"==typeof self&&self&&self.Object===Object&&self,u=c||l||Function("return this")(),p=Object.prototype.toString,m=Math.max,f=Math.min,h=function(){return u.Date.now()};function g(e,t,n){var a,o,s,r,d,c,l=0,u=!1,p=!1,g=!0;if("function"!=typeof e)throw new TypeError(i);function y(t){var n=a,i=o;return a=o=void 0,l=t,r=e.apply(i,n)}function b(e){return l=e,d=setTimeout(x,t),u?y(e):r}function w(e){var n=e-c;return void 0===c||n>=t||n<0||p&&e-l>=s}function x(){var e=h();if(w(e))return I(e);d=setTimeout(x,function(e){var n=t-(e-c);return p?f(n,s-(e-l)):n}(e))}function I(e){return d=void 0,g&&a?y(e):(a=o=void 0,r)}function L(){var e=h(),n=w(e);if(a=arguments,o=this,c=e,n){if(void 0===d)return b(c);if(p)return d=setTimeout(x,t),y(c)}return void 0===d&&(d=setTimeout(x,t)),r}return t=_(t)||0,v(n)&&(u=!!n.leading,s=(p="maxWait"in n)?m(_(n.maxWait)||0,t):s,g="trailing"in n?!!n.trailing:g),L.cancel=function(){void 0!==d&&clearTimeout(d),l=0,a=c=o=d=void 0},L.flush=function(){return void 0===d?r:I(h())},L}function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function _(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==p.call(e)}(e))return NaN;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=s.test(e);return n||r.test(e)?d(e.slice(2),n?2:8):o.test(e)?NaN:+e}e.exports=function(e,t,n){var a=!0,o=!0;if("function"!=typeof e)throw new TypeError(i);return v(n)&&(a="leading"in n?!!n.leading:a,o="trailing"in n?!!n.trailing:o),g(e,t,{leading:a,maxWait:t,trailing:o})}})),o.register("68O3z",(function(e,t){n(e.exports,"default",(function(){return s}));var i=o("dCvm9"),a=o("04jNI");class s{async fetchPopular(){const e=document.querySelector(".container-card"),t=new(0,i.Spinner)(a.default).spin(e);try{const e="https://api.themoviedb.org/3/trending/movie/day?api_key=03779c52c93ea63ebe46db37a334d7d8",n=await fetch(e),i=await n.json();return t.stop(),i}catch(e){console.log(e,"fetchPopular")}}async fetchPopularPagination(e){const t=document.querySelector(".container-card"),n=new(0,i.Spinner)(a.default).spin(t);try{const t=`https://api.themoviedb.org/3/trending/movie/day?api_key=03779c52c93ea63ebe46db37a334d7d8&page=${e}`,i=await fetch(t),a=await i.json();return n.stop(),a}catch(e){console.log(e,"fetchPopularPagination")}}async fetchByQuery(e){const t=document.querySelector(".container-card"),n=new(0,i.Spinner)(a.default).spin(t);try{const t=`https://api.themoviedb.org/3/search/movie?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US&query=${e}&include_adult=false`,i=await fetch(t),a=await i.json();return n.stop(),a}catch(e){console.log(e)}}async fetchByQueryPagination(e,t){const n=document.querySelector(".container-card"),o=new(0,i.Spinner)(a.default).spin(n);try{const n=`https://api.themoviedb.org/3/search/movie?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US&query=${e}&page=${t}&include_adult=false`,i=await fetch(n),a=await i.json();return o.stop(),a}catch(e){console.log(e)}}async getGenres(){try{const e="https://api.themoviedb.org/3/genre/movie/list?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US",t=await fetch(e),n=await t.json();return console.log(n),n}catch(e){console.log(e)}}async getCountByQuery(e){try{const t=`https://api.themoviedb.org/3/search/movie?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US&query=${e}&include_adult=false`,n=await fetch(t);return(await n.json()).total_results}catch(e){console.log(e)}}async fetchById(e){const t=document.querySelector(".container-card"),n=new(0,i.Spinner)(a.default).spin(t);try{const t=`https://api.themoviedb.org/3/movie/${e}?api_key=03779c52c93ea63ebe46db37a334d7d8&language=en-US`,i=await fetch(t),a=await i.json();return n.stop(),a}catch(e){console.log(e)}}setCurrentPage(e){this.page=e}incrementPage(){this.page+=1}resetPage(){this.page=1}constructor(){this.searchQuery=""}}})),o.register("dCvm9",(function(e,t){n(e.exports,"Spinner",(function(){return o}),(function(e){return o=e}));var i=function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},a={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",fadeColor:"transparent",animation:"spinner-line-fade-default",rotate:0,direction:1,speed:1,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:"0 0 1px transparent",position:"absolute"},o=function(){function e(e){void 0===e&&(e={}),this.opts=i(i({},a),e)}return e.prototype.spin=function(e){return this.stop(),this.el=document.createElement("div"),this.el.className=this.opts.className,this.el.setAttribute("role","progressbar"),s(this.el,{position:this.opts.position,width:0,zIndex:this.opts.zIndex,left:this.opts.left,top:this.opts.top,transform:"scale("+this.opts.scale+")"}),e&&e.insertBefore(this.el,e.firstChild||null),function(e,t){var n=Math.round(t.corners*t.width*500)/1e3+"px",i="none";!0===t.shadow?i="0 2px 4px #000":"string"==typeof t.shadow&&(i=t.shadow);for(var a=function(e){for(var t=/^\s*([a-zA-Z]+\s+)?(-?\d+(\.\d+)?)([a-zA-Z]*)\s+(-?\d+(\.\d+)?)([a-zA-Z]*)(.*)$/,n=[],i=0,a=e.split(",");i<a.length;i++){var o=a[i].match(t);if(null!==o){var s=+o[2],r=+o[5],d=o[4],c=o[7];0!==s||d||(d=c),0!==r||c||(c=d),d===c&&n.push({prefix:o[1]||"",x:s,y:r,xUnits:d,yUnits:c,end:o[8]})}}return n}(i),o=0;o<t.lines;o++){var c=~~(360/t.lines*o+t.rotate),l=s(document.createElement("div"),{position:"absolute",top:-t.width/2+"px",width:t.length+t.width+"px",height:t.width+"px",background:r(t.fadeColor,o),borderRadius:n,transformOrigin:"left",transform:"rotate("+c+"deg) translateX("+t.radius+"px)"}),u=o*t.direction/t.lines/t.speed;u-=1/t.speed;var p=s(document.createElement("div"),{width:"100%",height:"100%",background:r(t.color,o),borderRadius:n,boxShadow:d(a,c),animation:1/t.speed+"s linear "+u+"s infinite "+t.animation});l.appendChild(p),e.appendChild(l)}}(this.el,this.opts),this},e.prototype.stop=function(){return this.el&&("undefined"!=typeof requestAnimationFrame?cancelAnimationFrame(this.animateId):clearTimeout(this.animateId),this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.el=void 0),this},e}();function s(e,t){for(var n in t)e.style[n]=t[n];return e}function r(e,t){return"string"==typeof e?e:e[t%e.length]}function d(e,t){for(var n=[],i=0,a=e;i<a.length;i++){var o=a[i],s=c(o.x,o.y,t);n.push(o.prefix+s[0]+o.xUnits+" "+s[1]+o.yUnits+o.end)}return n.join(", ")}function c(e,t,n){var i=n*Math.PI/180,a=Math.sin(i),o=Math.cos(i);return[Math.round(1e3*(e*o+t*a))/1e3,Math.round(1e3*(-e*a+t*o))/1e3]}})),o.register("04jNI",(function(e,t){n(e.exports,"default",(function(){return i}));var i={lines:13,length:38,width:17,radius:45,scale:1,corners:1,speed:1,rotate:0,animation:"spinner-line-fade-quick",direction:1,color:"#FF6B08",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"fixed"}})),o.register("bYdoQ",(function(e,t){n(e.exports,"renderMarkup",(function(){return l})),n(e.exports,"makeMarkupLib",(function(){return u})),n(e.exports,"openModal",(function(){return p})),n(e.exports,"showRequestError",(function(){return m}));var i=o("68O3z"),a=o("5uEKZ");const s=new(0,i.default),r=document.querySelector(".container-card"),d=document.querySelector(".modal__card-content"),c=document.querySelector(".header-error-container");async function l(e){var t;console.log(e),r.innerHTML=await(t=e.results,t.map((({poster_path:e,id:t,original_title:n,release_date:i,genre_ids:a})=>{const o=i.split("-")[0],s=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],r=a.reduce(((e,t)=>{const n=s.filter((e=>e.id===t))[0];return e.push(n.name),e.slice(0,3)}),[]);return 3===r.length&&r.splice(2,1,"Other"),`\n                  <div class="container-card_single-card" data-id="${t}" >\n                    \n                      <div class="poster">\n                          <img src="https://image.tmdb.org/t/p/w500${e}" alt="${n}">\n                      </div>\n                      <div class="info">\n                        <h3 class="info_title">${n}</h3>\n                        <p class="info_details">\n                            ${r.join(", ")} | ${o}\n                        </p>\n                      </div>\n                    \n                  </div> \n        `})).join(""))}async function u(e){return e.map((({poster_path:e,id:t,original_title:n,release_date:i,genres:a})=>{const o=i.split("-")[0],s=a.flatMap((e=>e.name)).slice(0,3);return console.log(s),3===s.length&&s.splice(2,1,"Other"),`\n                  <div class="container-card_single-card" data-id="${t}" >\n                    <div class="poster">\n                        <img src="https://image.tmdb.org/t/p/w500${e}" alt="${n}">\n                    </div>\n                    <div class="info">\n                      <h3 class="info_title">${n}</h3>\n                      <p class="info_details">\n                          ${s.join(", ")} | ${o}\n                      </p>\n                    </div>\n                  </div> \n        `})).join("")}async function p(e){const t=await s.fetchById(e);d.innerHTML=await function({poster_path:e,original_title:t,overview:n,popularity:i,genres:a,vote_average:o,vote_count:s}){const r=a.flatMap((e=>e.name)).slice(0,3);return r.slice(0,3),`\n    <button type="button" class="modal__close" data-modal-close>\n      <svg class="icon modal-close-btn__icon" width="16" height="16">\n          <use href="/src/images/icons.svg#icon-X"\n      </svg>\n    </button>\n  <img src="https://image.tmdb.org/t/p/w500${e}" alt="${t}" class="modal__img" />\n  <div class="modal__info">\n    <h2 class="modal__info-title">${t}</h2>\n    <div class="modal__info-block">\n      <ul class="modal__info discription__modal">\n        <li class="discription__modal-item">\n          <h4 class="discription__modal-title">Vote / Votes</h4>\n          <p class="discription__modal-text">\n            <span class="discription__modal-text-vote">${o}</span>\n            <span class="discription__modal-text-slash">/</span>\n            <span class="discription__modal-text-votes">${s}</span>\n          </p>\n        </li>\n        <li class="discription__modal-item">\n          <h4 class="discription__modal-title">Popularity</h4>\n          <p class="discription__modal-text">${i.toFixed(1)}</p>\n        </li>\n        <li class="discription__modal-item">\n          <h4 class="discription__modal-title">Original Title</h4>\n          <p class="discription__modal-text">${t}</p>\n        </li>\n        <li class="discription__modal-item">\n          <h4 class="discription__modal-title">Genre</h4>\n          <p class="discription__modal-text">${r.join(", ")}</p>\n        </li>\n      </ul>\n    </div>\n    <div class="modal__info about__modal">\n      <h4 class="about__modal-title">About</h4>\n      <p class="about__modal-text">${n}</p>\n    </div>\n    <div class="modal__button">\n      <button type="button" class="modal__btn-add modal__btn-1add">add to Watched</button>\n      <button type="button" class="modal__btn-add modal__btn-1remove hide-btn">remove from Watched</button>\n      <button type="button" class="modal__btn-add modal__btn-2add">add to queue</button>\n      <button type="button" class="modal__btn-add modal__btn-2remove hide-btn">remove from queue</button>\n    </div>\n  </div>`}(t);const n=document.querySelector(".modal__close"),i=document.querySelector(".modal__card-overlay");n.addEventListener("click",(function e(){n.removeEventListener("click",e),i.classList.add("is-hidden")})),i.addEventListener("click",(function e(t){t.target===i&&(i.removeEventListener("click",e),i.classList.add("is-hidden"))})),window.addEventListener("keydown",(function e(t){27===t.keyCode&&(window.removeEventListener("keydown",e),i.classList.add("is-hidden"))}));const o=document.querySelector(".modal__btn-1add"),r=document.querySelector(".modal__btn-2add"),c=document.querySelector(".modal__btn-1remove"),l=document.querySelector(".modal__btn-2remove");!async function(){const t=await s.fetchById(e),n=a.storage.readItem("qu");if(n){const e=t.title;n.findIndex((t=>t.title===e))>=0?(r.classList.add("hide-btn"),l.classList.remove("hide-btn")):n===[]&&(l.classList.add("hide-btn"),r.classList.remove("hide-btn"))}}(),async function(){const t=await s.fetchById(e),n=a.storage.readItem("watched");if(n){const e=t.title;n.findIndex((t=>t.title===e))>=0?(o.classList.add("hide-btn"),c.classList.remove("hide-btn")):n===[]&&(c.classList.add("hide-btn"),o.classList.remove("hide-btn"))}}(),o.addEventListener("click",(async()=>{const t=await s.fetchById(e),n=a.storage.readItem("watched",[]),i=a.storage.readItem("qu");if(i){const e=t.title,o=i.findIndex((t=>t.title===e));if(o>=0){i.splice(o,1);a.storage.addItem("qu",i),n.push(t),a.storage.addItem("watched",n)}else-1===o&&(n.push(t),a.storage.addItem("watched",n))}else n.push(t),a.storage.addItem("watched",n);o.classList.add("hide-btn"),c.classList.remove("hide-btn"),l.classList.add("hide-btn"),r.classList.remove("hide-btn")})),r.addEventListener("click",(async()=>{const t=await s.fetchById(e),n=a.storage.readItem("qu",[]),i=a.storage.readItem("watched");if(i){const e=t.title,o=i.findIndex((t=>t.title===e));if(o>=0){i.splice(o,1);a.storage.addItem("watched",i),n.push(t),a.storage.addItem("qu",n)}else-1===o&&(n.push(t),a.storage.addItem("qu",n))}else n.push(t),a.storage.addItem("qu",n);r.classList.add("hide-btn"),l.classList.remove("hide-btn"),c.classList.add("hide-btn"),o.classList.remove("hide-btn")})),c.addEventListener("click",(async()=>{const e=a.storage.readItem("watched"),n=t.title,i=e.findIndex((e=>e.title===n));if(-1===i)console.log("error");else{e.splice(i,1);a.storage.addItem("watched",e)}c.classList.add("hide-btn"),o.classList.remove("hide-btn")})),l.addEventListener("click",(()=>{const e=a.storage.readItem("qu"),n=t.title,i=e.findIndex((e=>e.title===n));if(-1===i)console.log("error");else{e.splice(i,1);a.storage.addItem("qu",e)}l.classList.add("hide-btn"),r.classList.remove("hide-btn")}))}function m(){c.classList.remove("is-hidden"),setTimeout((()=>{c.classList.add("is-hidden")}),2e3)}})),o.register("5uEKZ",(function(e,t){n(e.exports,"storage",(function(){return i}));const i={readItem(e,t){try{const n=JSON.parse(localStorage.getItem(e));return n||t}catch(e){return null}},addItem(e,t){localStorage.setItem(e,JSON.stringify(t))}}}));
//# sourceMappingURL=index.0d68e42c.js.map
